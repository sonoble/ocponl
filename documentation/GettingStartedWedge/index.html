<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <title> - Open Network Linux</title>
    <meta name="generator" content="Hugo 0.16" />

    
    <meta name="description" content="A material design theme for documentations.">
    
    <link rel="canonical" href="http://ocp.opennetlinux.org/documentation/GettingStartedWedge/">
    
    <meta name="author" content="Digitalcraftsman">
    

    <meta property="og:url" content="http://ocp.opennetlinux.org/documentation/GettingStartedWedge/">
    <meta property="og:title" content="Open Network Linux">
    <meta property="og:image" content="http://ocp.opennetlinux.org/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Open Network Linux">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="http://ocp.opennetlinux.org/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="http://ocp.opennetlinux.org/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('http://ocp.opennetlinux.org/fonts/icon.eot?52m981');
        src: url('http://ocp.opennetlinux.org/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
             url('http://ocp.opennetlinux.org/fonts/icon.woff?52m981')
               format('woff'),
             url('http://ocp.opennetlinux.org/fonts/icon.ttf?52m981')
               format('truetype'),
             url('http://ocp.opennetlinux.org/fonts/icon.svg?52m981#icon')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="http://ocp.opennetlinux.org/stylesheets/application.css">
    <link rel="stylesheet" href="http://ocp.opennetlinux.org/stylesheets/temporary.css">
    <link rel="stylesheet" href="http://ocp.opennetlinux.org/stylesheets/palettes.css">
    <link rel="stylesheet" href="http://ocp.opennetlinux.org/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu%2bMono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="http://ocp.opennetlinux.org/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-red palette-accent-light green">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
      </div>
    </div>

    
    <div class="button button-twitter" role="button" aria-label="Twitter">
       <a href="https://twitter.com/opennetlinux" title="@opennetlinux on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
    </div>
    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/opennetworklinux" title="@opennetworklinux on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/opencomputeproject/OpenNetworkLinux" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="http://ocp.opennetlinux.org/images/logo.png">
        </div>
      
      <div class="name">
        <strong>Open Network Linux <span class="version">2.0.0</span></strong>
        
          <br>
          OpenNetworkLinux
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="http://opennetlinux.org/binaries" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/opencomputeproject/OpenNetworkLinux/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Home" href="http://ocp.opennetlinux.org/">
	
	Home
</a>


  
</li>



<li>
  
    



<a  title="Documentation" href="http://ocp.opennetlinux.org/documentation/">
	
	Documentation
</a>


  
</li>



<li>
  
    



<a  title="Download Binaries" href="http://ocp.opennetlinux.org/binaries/">
	
	Download Binaries
</a>


  
</li>



<li>
  
    



<a  title="Getting started" href="http://ocp.opennetlinux.org/getting-started/">
	
	Getting started
</a>


  
</li>



<li>
  
    



<a  title="FAQ" href="http://ocp.opennetlinux.org/faq/">
	
	FAQ
</a>


  
</li>



<li>
  
    



<a  title="Community" href="http://ocp.opennetlinux.org/community/">
	
	Community
</a>


  
</li>



<li>
  
    



<a  title="Blog" href="http://ocp.opennetlinux.org/blog/">
	
	Blog
</a>


  
</li>



<li>
  
    



<a  title="Wedge" href="http://ocp.opennetlinux.org/wedge/">
	
	Wedge
</a>


  
</li>



<li>
  
    



<a  title="License" href="http://ocp.opennetlinux.org/license/">
	
	License
</a>


  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          
          <li>
            <a href="https://twitter.com/opennetlinux" target="_blank" title="@opennetlinux on Twitter">
              @opennetlinux on Twitter
            </a>
          </li>
          

          
          <li>
            <a href="https://github.com/opennetworklinux" target="_blank" title="@opennetworklinux on GitHub">
              @opennetworklinux on GitHub
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1> </h1>

			

<h2 id="getting-started-with-the-accton-wedge">Getting Started With the Accton Wedge</h2>

<p>To install and run ONL on the Accton Wedge you will need ONIE and
the ONL wedge installer binary. Relevant pointers can be found at
<a href="https://opennetlinux.org/wedge">https://opennetlinux.org/wedge</a></p>

<p>Once installed, ONL has a default account (&ldquo;root&rdquo;) with a default password
(&ldquo;onl&rdquo;).  The network interface is disabled by default so that you can change
the root password before the system comes up.  You will need to enable the
network interface before you can run the FBOSS agent.</p>

<p>FBOSS is installed and set to run the configuration created for a OCP ONL
on Wedge Demo.  This configuration sets up the first physical QSFP port of
the wedge as 4 10G ports (via a break out cable) and configures vlans and
ip addresses on them.</p>

<h2 id="onie-manual-install">ONIE Manual Install</h2>

<p>If your Accton Wedge does not have ONIE installed, you will need to install
it before you can proceed.</p>

<p>1) Download the ONIE rescue image from <a href="http://opennetlinux.org/binaries/accton-wedge/onie-recovery-x86_64-accton_wedge_16x-r0.iso">http://opennetlinux.org/binaries/accton-wedge/onie-recovery-x86_64-accton_wedge_16x-r0.iso</a></p>

<p>2) Burn the image onto a USB (a USB with a minimum size of 256M is necessary)</p>

<p>3) Insert the USB into the front USB port on the Wedge</p>

<p>4) Attach a serial terminal to the wedge</p>

<p>5) Power on the wedge and wait for the BMC to finish booting</p>

<p>6) Log into the bmc with the login: root password: 0penBmc</p>

<p>7) Attach to the wedge microserver using the command sol.sh</p>

<p>8) If the microserver shows the BIOS status screen press F2 to go to the BIOS
configuration menu</p>

<p>9) In cases where the wedge microserver has already booted into the default
linux installation, you will need to either reboot (if possible) or hit ctrl-x, exiting to the BMC and issue the &ldquo;wedge_power reset&rdquo; command to power-cycle the
microserver, run sol.sh again and hit F2 when the BIOS status screen appears</p>

<p>10) One you are in the BIOS configuration, move to the boot screen and change
the boot mode from UEFI to Legacy</p>

<p>11) In the boot device list, make sure that the USB is set to #1</p>

<p>12) Hit esc-0 to or F10 to save and exit the configuration</p>

<p>13) The system will now boot from the ONIE rescue USB</p>

<p>14) When the ONIE Grub window appears, choose &ldquo;Embed ONIE&rdquo;</p>

<p>15) ONIE will be installed on the system and the system will automatically
reboot</p>

<p>16) <em>IMPORTANT</em> Remove the USB from the system before proceeding to the ONL install</p>

<h2 id="onl-manual-install">ONL Manual Install</h2>

<p>1) Attach a serial terminal to the wedge</p>

<p>2) Boot switch and choose &ldquo;ONIE: Rescue&rdquo; to go to ONIE&rdquo;s interactive mode</p>

<p>3) From the ONIE# prompt run &ldquo;install_url <a href="http://opennetlinux.org/binaries/latest-wedge-2.0.installer&quot;">http://opennetlinux.org/binaries/latest-wedge-2.0.installer&quot;</a></p>

<p>4) Wait for the install to finish and the system to reboot</p>

<p>5) Once the onl login prompt appears login with the username root and the
password &ldquo;onl&rdquo;</p>

<p>6) Configure the ma1 interface either via dhcp (dhclient ma1) or manually</p>

<p>7) Install fboss using the commands</p>

<pre><code>#&gt; apt-get update
#&gt; apt-get install fboss
</code></pre>

<p>8) From the command prompt you can start fboss by using the command
&ldquo;service fboss_wedge_agent start&rdquo;</p>

<p>9) The first time you start the fboss_wedge_agent service it will download
the OpenNSL library from the Broadcom github account.</p>

<p>10) Once the library is installed, fboss_wedge_agent will start, using the
default configuration located at /etc/fboss/ocp-demo.json</p>

<p>11) You can confirm that the fboss_wedge_agent is running by issuing the
command &ldquo;service fboss_wedge_agent status&rdquo;</p>

<p>12) If fboss is running, you should see &ldquo;[ ok ] fboss_wedge_agent is running.&rdquo;</p>

<p>13) You can now execute the fboss_route.py script and configure the system.</p>

<h2 id="modifying-the-fboss-wedge-agent-configuration">Modifying The fboss_wedge_agent configuration</h2>

<p>In the /etc/init.d/fboss_wedge_agent script, you will locate a section where
the configuration file &ldquo;FBOSS_DAEMON_OPTIONS&rdquo; is set:</p>

<p>OCP_DEMO=&ldquo;-config /etc/fboss/ocp-demo.json&rdquo;
SAMPLE1=&ldquo;-config /etc/fboss/sample1.json&rdquo;
SAMPLE2=&ldquo;-config /etc/fboss/sample2.json&rdquo;
SAMPLE3=&ldquo;-config /etc/fboss/sample3.json&rdquo;
FBOSS_DAEMON_OPTIONS=$OCP_DEMO</p>

<p>The sample configurations are documented here: <a href="https://github.com/facebook/fboss/tree/master/fboss/agent/configs">https://github.com/facebook/fboss/tree/master/fboss/agent/configs</a></p>

<p>To change the configuration, simply change the variable from $OCP_DEMO to $SAMPLE1/2/3 or add your own configuration and set the variable to call it.</p>

<p>Expected output (you can also see videos at <a href="https://opennetlinux.org/wedge">https://opennetlinux.org/wedge</a>)</p>

<p>ONIE:</p>

<pre><code>    ONIE: Using DHCPv4 addr: eth0: 10.7.1.10 / 255.254.0.0
    discover: installer mode detected.  Running installer.

    Please press Enter to activate this console. ONIE: Using DHCPv4 addr: eth0: 10.7.1.10 / 255.254.0.0
    ONIE: Starting ONIE Service Discovery

    To check the install status inspect /var/log/onie.log.
    Try this:  tail -f /var/log/onie.log
</code></pre>

<p>Now press RETURN here to jump into ONIE&rdquo;s manual installer mode.  You should see:</p>

<pre><code>    ** Installer Mode Enabled **

    ONIE:/ # 
</code></pre>

<p>Then simply download the latest ONL wedge installer from the website and run it.</p>

<pre><code>    ONIE:/ # install_url http://opennetlinux.org/binaries/latest-wedge-2.0.installer

    Connecting to opennetlinux.org (107.170.237.53:80)
    Open Network Installer running under ONIE.
    Installing Open Network Linux Software Image (ONL-2.0.0_ONL-OS_2016-02-12.2304-b9b7e50_AMD64.swi)...
    Installation finished. No error reported.
    Install finished.  Rebooting to Open Network Linux.
    ...

    Connecting tty=ttyS1 with /sbin/pgetty

    Debian GNU/Linux 8 localhost ttyS1

    localhost login: root
    Password:
    Linux localhost 3.2.65-1+deb7u2-OpenNetworkLinux #1 SMP Fri Feb 12 23:10:15 UTC 2016 x86_64

    root@localhost:~# apt-get update
    root@localhost:~# apt-get install fboss
    WARNING: The following packages cannot be authenticated!
    folly wangle fbthrift fboss-py fboss-core fboss
    Install these packages without verification? [y/N] y

    root@localhost:~# service fboss_wedge_agent start
    [....] Starting  Facebook FBOSS agent: fboss_wedge_agent
    Error: OpenNSL library not found, attempting to grab from GitHub
    Saving to: ‘/usr/local/lib/libopennsl.so.1’

    OpenNSL library succesfully installed
    [ ok --- Loading   linux-kernel-bde   linux-user-bde   linux-bcm-knet  ; Creating devices .
    root@localhost:~# service fboss_wedge_agent status
    [ ok ] fboss_wedge_agent is running.
</code></pre>


			<aside class="copyright" role="note">
				
				&copy; 2016 Released under the MIT license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="http://ocp.opennetlinux.org/" title="Open Network Linux">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Open Network Linux
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="http://ocp.opennetlinux.org/documentation/PersistWorkflow/" title="">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'http:\/\/ocp.opennetlinux.org\/';
      var repo_id  = 'OpenNetworkLinux';
    
    </script>

    <script src="http://ocp.opennetlinux.org/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;
            
            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }
        

        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//gohugo.io/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
